<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>The Freedom Engine ‚Äî Personal AI Trainer</title>
<style>
:root{
  --ink:#f7f8ff; --ring:rgba(255,255,255,.22);
  --glass1:rgba(255,255,255,.05); --glass2:rgba(255,255,255,.03);
  --mag:#ff7bf1; --sun:#ffb84d; --lime:#8dff6a;
}
body{margin:0;color:var(--ink);background:#0f0a1c;font-family:"TechfontItalica",system-ui;}
.bg{position:fixed;inset:0;z-index:-4;background:linear-gradient(180deg,#1b1032 0%,#2a184a 50%,#25143f 100%);animation:shift 60s linear infinite;}
@keyframes shift{0%{filter:hue-rotate(0deg);}50%{filter:hue-rotate(180deg);}100%{filter:hue-rotate(360deg);}}
.overlay{position:fixed;inset:0;z-index:-3;opacity:.25;background-image:url('https://media.tenor.com/JO9Zp6ThYcsAAAAM/sacred-geometry.gif');background-size:cover;background-position:center;mix-blend-mode:overlay;}
.wrap{display:grid;grid-template-columns:440px 1fr;gap:24px;padding:24px;min-height:100vh}
.card{border-radius:24px;padding:18px;border:1px solid var(--ring);background:linear-gradient(180deg,var(--glass1),var(--glass2));backdrop-filter:blur(7px);box-shadow:0 20px 60px rgba(0,0,0,.45);}
.brand{display:grid;grid-template-columns:148px 1fr;gap:18px;align-items:center;margin-bottom:16px}
.logo-box{height:148px;border-radius:24px;border:1px solid var(--ring);background:rgba(255,255,255,.08);overflow:hidden;position:relative;}
.logo{position:absolute;left:50%;top:50%;width:520px;height:520px;transform:translate(-50%,-50%) scale(.95) scaleY(-1);animation:spin 36s linear infinite reverse;}
@keyframes spin{to{transform:translate(-50%,-50%) scale(.95) scaleY(-1) rotateZ(360deg);}}
.titles h1{margin:0;font-size:46px;font-weight:800;}
.titles .sub{margin-top:6px;opacity:.9;font-weight:700;}
.badge{display:inline-block;margin-left:8px;padding:5px 10px;border-radius:999px;color:#0b0c14;font-weight:900;background:linear-gradient(90deg,#ff7bf1,#ffd86a)}
.road{margin-top:18px;border:1px solid var(--ring);border-radius:18px;padding:16px;background:rgba(255,255,255,.08)}
.bar{height:12px;border-radius:999px;background:rgba(14,10,25,.6);border:1px solid var(--ring);overflow:hidden}
.bar>span{display:block;height:100%;width:0%;transition:width .35s ease;background:linear-gradient(90deg,#ff7bf1,#ffb84d,#8dff6a,#ff6a6a)}
.bar-legend{display:flex;justify-content:space-between;margin-top:8px;font-size:13px;color:#aaa}
.row{display:flex;gap:10px;margin-top:16px;flex-wrap:wrap}
.btn{appearance:none;border:none;cursor:pointer;font-weight:900;color:#0b0c14;background:linear-gradient(180deg,#fff,#e9eefc);
border-radius:999px;padding:10px 14px;box-shadow:0 8px 20px rgba(0,0,0,.35),inset 0 0 0 1px rgba(255,255,255,.4);}
.btn-ghost{background:rgba(255,255,255,.08);color:var(--ink);border:1px solid var(--ring)}
.chat-col{display:flex;flex-direction:column;height:calc(100vh - 48px)}
.chat{flex:1;overflow:auto;padding:18px 18px 96px;border:1px solid var(--ring);border-radius:24px;background:rgba(255,255,255,.06)}
.bubble{margin:14px 0;padding:14px 16px 14px 56px;border-radius:18px;border:1px solid var(--ring);
background:rgba(255,255,255,.08);position:relative;}
.bubble .who{position:absolute;left:12px;top:12px;width:32px;height:32px;display:grid;place-items:center;border-radius:10px;
background:#0e0a1fe6;border:1px solid var(--ring)}
.composer{position:absolute;left:0;right:0;bottom:0;display:grid;grid-template-columns:1fr 110px;gap:10px;align-items:end;padding-top:10px;}
textarea{width:100%;min-height:54px;resize:vertical;padding:14px 16px;color:var(--ink);background:#120d20;border:1px solid var(--ring);border-radius:16px;}
.send{height:54px;border-radius:16px;font-weight:900;background:linear-gradient(130deg,#ff7bf1,#ffd86a);color:#0b0c14;}
</style>
</head>
<body class="is-premium">
<div class="bg"></div>
<div class="overlay"></div>
<div class="wrap">
<section class="card" id="left">
  <div class="brand">
    <div class="logo-box"><img class="logo" src="ias-logo.png" alt=""></div>
    <div class="titles"><h1>The Freedom Engine</h1><div class="sub">Personal AI Trainer <span class="badge">Premium</span></div></div>
  </div>
  <div class="road">
    <div class="bar"><span id="bar"></span></div>
    <div class="bar-legend"><span>Roadmap</span><span id="barText">1/5</span></div>
    <div class="row">
      <button class="btn btn-ghost" id="exportBtn">Export</button>
      <button class="btn btn-ghost" id="modulesBtn">Expansions</button>
    </div>
  </div>
</section>
<section class="chat-col">
  <div class="card chat" id="chat"></div>
  <div class="composer">
    <textarea id="input" placeholder="Answer here. Press Enter to send."></textarea>
    <button class="send" id="sendBtn">Send</button>
  </div>
</section>
</div>
<script>
const WORKER_BASE="https://freedom-engine-worker.intelligentlyartificialsystems.workers.dev";
const STAGES=5;
const state={roadmap:1,messages:[],stage:1,data:{}};
const el={bar:document.getElementById("bar"),barText:document.getElementById("barText"),chat:document.getElementById("chat"),
input:document.getElementById("input"),send:document.getElementById("sendBtn")};
function updateBar(){const pct=Math.min(STAGES,state.roadmap)/STAGES*100;el.bar.style.width=pct+"%";el.barText.textContent=`${state.roadmap}/${STAGES}`;}
function pushBubble(who,text){if(!text)return;const b=document.createElement("div");b.className="bubble";b.innerHTML=`<div class="who">${who==="user"?"üí¨":"‚öôÔ∏è"}</div>${text}`;el.chat.appendChild(b);el.chat.scrollTop=el.chat.scrollHeight;state.messages.push({who,text});}
async function send(){
  const v=el.input.value.trim();if(!v)return;pushBubble("user",v);el.input.value="";
  try{
    const r=await fetch(WORKER_BASE+"/chat",{method:"POST",headers:{"Content-Type":"application/json"},
      body:JSON.stringify({user:v,stage:state.stage,data:state.data,history:state.messages.slice(-10)})});
    const j=await r.json();
    if(!j.ok){pushBubble("ai","The Engine's connection faltered. Try again.");return;}
    pushBubble("ai",j.reply);state.stage=j.stage||state.stage;state.roadmap=Math.min(STAGES,state.stage);updateBar();
  }catch(e){pushBubble("ai","Network error. Try again later.");}
}
el.send.addEventListener("click",send);
el.input.addEventListener("keydown",e=>{if(e.key==="Enter"&&!e.shiftKey){e.preventDefault();send();}});
pushBubble("ai","Welcome in. I'm your Freedom Engine mentor. We'll build a micro-offer business together. Pick a lane or say <em>help me choose</em>: design ‚Ä¢ writing ‚Ä¢ coaching ‚Ä¢ dev ‚Ä¢ other");
updateBar();
</script>
</body>
</html>